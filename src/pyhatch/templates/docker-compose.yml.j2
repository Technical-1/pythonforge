# Generated by pyhatch {{ pyhatch_version }}

services:
  {{ config.name }}:
    build:
      context: .
      dockerfile: Dockerfile
{% if config.project_type.value == "api" %}
    ports:
      - "8000:8000"
{% endif %}
    volumes:
      # Mount source code for development
      - .:/app:cached
    environment:
      - PYTHONDONTWRITEBYTECODE=1
      - PYTHONUNBUFFERED=1
{% if config.project_type.value == "api" %}
    # Uncomment for hot reload in development
    # command: uvicorn {{ config.package_name }}.main:app --host 0.0.0.0 --reload
{% endif %}

  # Development service with all dev dependencies
  dev:
    build:
      context: .
      dockerfile: Dockerfile
      target: builder
    volumes:
      - .:/app:cached
    command: /bin/bash
    stdin_open: true
    tty: true
